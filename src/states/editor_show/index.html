<form name="$form" promise="promise" ng-submit="promise = trigger()">
    <div>
        <span ng-if="history[query.id][0]">
            <span ng-if="history[query.id][0].passed == history[query.id][0].total" class="indicator indicator-success"></span>
            <span ng-if="history[query.id][0].passed < history[query.id][0].total" class="indicator indicator-danger"></span>
        </span>

        <span ng-click="_.editName = true" ng-if="!_.editName">{{query.name}}</span>
        <span ng-if="_.editName">
            <input ng-model="query.name"/>
            <button ng-click="_.editName = false" class="btn btn-success btn-xs"><i class="fa fa-check"></i></button>
        </span>

        <button class="btn btn-success btn-xs" ng-disabled="promise.isLoading">
            <i class="fa fa-play" ng-if="!promise.isLoading"></i>
            <span loader="promise.isLoading"></span>
            Send
        </button>
    </div>
</form>

<div class="btn-group">
    <span class="btn btn-default" ng-class="{active: _.content == 'config'}" ng-click="_.content = 'config'">Config</span>
    <span class="btn btn-default" ng-class="{active: _.content == 'tests'}" ng-click="_.content = 'tests'">Tests</span>
</div>
<code-editor value="query.config" ng-if="_.content == 'config'" style="width:100%;height:400px;border:1px solid #ccc; display: block"></code-editor>
<code-editor value="query.tests" ng-if="_.content == 'tests'" style="width:100%;height:400px;border:1px solid #ccc; display: block"></code-editor>

<hr />
<div class="btn-group">
    <span class="btn btn-default btn-xs" ng-click="_.contentResponse = 'response'" ng-class="{active: _.contentResponse == 'response'}"><span class="label label-default" ng-if="response">{{response.status}}</span> Response <i class="fa fa-caret-down"></i></span>
    <span class="btn btn-default btn-xs" ng-click="_.contentResponse = 'tests'" ng-class="{active: _.contentResponse == 'tests', 'btn-success': tests && tests.passed == tests.total, 'btn-danger': tests && tests.passed < tests.total}">
        <span ng-if="tests">{{tests.passed}}/{{tests.total}}</span>
        Tests <i class="fa fa-caret-down"></i>
    </span>
</div>

<div response="response" ng-if="_.contentResponse == 'response' && response"></div>
<div tests="tests" ng-if="_.contentResponse == 'tests' && tests"></div>


